import{_ as m,s as f,k as d,l as u,o as r,c as l,x as N,a as c,F as g,t as k,n as E,y as P,z as V,f as p,p as b,b as w,e as z,g as C,C as D,m as T,h as I,q as v,A as U,B as L,D as x,j as y,r as q,E as R,d as W,v as Y,S as J}from"./index-fHMPsKpq.js";import{u as A,P as K}from"./PokemonShowCase-vZca1Ee9.js";import{C as H}from"./ChooseTitle--DnCnxj8.js";const Q="/assets/gamefield-1kCAL5oI.jpg",X=["src"],Z=["src"],ee={__name:"Pokemon",props:{pokemon:Object,side:String,playerNr:String},setup(e){const n=e,{attackAnimation:o}=f(d()),a=u(()=>o.value.animationOn===parseInt(n.playerNr)),t=u(()=>o.value.animationType);return(s,i)=>(r(),l(g,null,[a.value?(r(),l("img",{key:0,class:"img-fluid",src:`src/assets/images/attackGifs/${t.value}.gif`,alt:"pokemon front",style:{width:"40%","margin-left":"10%","object-fit":"contain","z-index":"2"}},null,8,X)):N("",!0),c("img",{class:"img-fluid",src:`/pokemons/${e.pokemon.pType}${e.side}.gif`,alt:"pokemon front",style:{width:"40%","margin-left":"10%","object-fit":"contain"}},null,8,Z)],64))}},j=m(ee,[["__scopeId","data-v-af94d6b9"]]),te={class:"pokemon-status"},ne={class:"pokemon-name"},oe={class:"pokemon-health-background"},ae={__name:"PokemonStatus",props:{pokemon:Object},setup(e){const n=e,o=u(()=>{const t=parseInt(n.pokemon.hp/n.pokemon.maxHp*100);return t>0?t:0}),a=u(()=>n.pokemon.hp>0?`${n.pokemon.hp} / ${n.pokemon.maxHp} `:"DEAD");return(t,s)=>(r(),l("div",te,[c("div",ne,k(e.pokemon.pType),1),c("div",oe,[c("div",{id:"bar-p-1",class:"pokemon-health-bar",style:E(`width: ${o.value}%`)},null,4)]),P(" "+k(a.value),1)]))}},B=m(ae,[["__scopeId","data-v-dcac6827"]]),se=e=>(b("data-v-a9c9a87a"),e=e(),w(),e),ce={class:"image-container"},re=se(()=>c("img",{src:Q},null,-1)),le={class:"overlay-content"},ie={class:"row h-50"},ue={id:"player-1-status",class:"col"},pe={id:"player-1-pokemon",class:"col position-relative"},me={class:"row h-50"},de={id:"player-2-pokemon",class:"col position-relative"},_e={id:"player-2-status",class:"col"},ke={__name:"GameField.module",props:{player1Data:Object|String,player2Data:Object|String},async setup(e){let n,o;const{getData:a}=d(),t=e;[n,o]=V(()=>a()),await n,o();const s=u(()=>t.player1Data.pokemons.contents&&t.player1Data.pokemons.contents[t.player1Data.currentPoke]),i=u(()=>t.player2Data.pokemons.contents&&t.player2Data.pokemons.contents[t.player2Data.currentPoke]);return(h,_)=>(r(),l("div",ce,[re,c("div",le,[c("div",ie,[c("div",ue,[p(B,{pokemon:s.value},null,8,["pokemon"])]),c("div",pe,[p(j,{pokemon:s.value,side:"Front",playerNr:"1"},null,8,["pokemon"])])]),c("div",me,[c("div",de,[p(j,{pokemon:i.value,side:"Back",playerNr:"2"},null,8,["pokemon"])]),c("div",_e,[p(B,{pokemon:i.value},null,8,["pokemon"])])])])]))}},he=m(ke,[["__scopeId","data-v-a9c9a87a"]]),ve={__name:"DecisionButton",props:{buttonType:String,text:String,onClickHandler:Function},setup(e){const n=e,o=u(()=>n.buttonType==="decideFight"?"fight-button":n.buttonType==="decideSwitch"?"switch-button":"");return(a,t)=>(r(),l("button",{onClick:t[0]||(t[0]=s=>e.onClickHandler(e.text)),class:z(`button-style ${o.value}`)},k(e.text),3))}},F=m(ve,[["__scopeId","data-v-fcafa6cd"]]),M={__name:"DecisionState",props:{player:Object},setup(e){const n=e,o=u(()=>n.player.value.pokemons.contents[n.player.value.currentPoke].hp>0),a=t=>{let s;switch(t){case"Fight!":if(o.value===!1){alert("Your current Pokemon is dead. Please switch to another Pokemon.");return}s=1;break;case"Switch!":s=2;break}C.post(`${D.serverUrl}/api/decision`,{move:s})};return(t,s)=>(r(),l(g,null,[p(F,{buttonType:"decideFight",text:"Fight!",onClickHandler:a}),p(F,{buttonType:"decideSwitch",text:"Switch!",onClickHandler:a})],64))}},ye={__name:"AttackButton",props:{attack:Object,onClickHandler:Function,move:Number},setup(e){return(n,o)=>(r(),l("button",{onClick:o[0]||(o[0]=a=>e.onClickHandler(e.move)),class:"attack-button button-style fight-button small"},k(e.attack.name),1))}},fe=m(ye,[["__scopeId","data-v-506b1068"]]),ge={__name:"FightingState",props:{player:Object,isTurn:Boolean},setup(e){const{showAttackAnimation:n}=d(),{pokemons:o}=f(A()),{getPokemonsData:a}=A(),t=e,s=u(()=>t.player.value.pokemons.contents[t.player.value.currentPoke]),i=u(()=>o.value.find(_=>_.name===s.value.pType).attacks),h=_=>{n(o.value.find($=>$.name===s.value.pType).pokemonArt),C.post(`${D.serverUrl}/api/fighting`,{move:_})};return T(()=>{a()}),(_,$)=>(r(!0),l(g,null,I(i.value,(S,O)=>(r(),v(fe,{attack:S,key:S.name,onClickHandler:h,move:O+1},null,8,["attack","move"]))),128))}},$e=e=>(b("data-v-f383d8d4"),e=e(),w(),e),be=["src"],we=$e(()=>c("br",null,null,-1)),Se={__name:"SwitchPokemonButton",props:{pokemon:Object,onClickHandler:Function,move:Number},setup(e){const n=e,o=u(()=>n.pokemon.hp>0?n.pokemon.hp:"DEAD");return(a,t)=>(r(),l("button",{onClick:t[0]||(t[0]=s=>e.onClickHandler(e.move)),class:"pokemon-button small"},[c("img",{class:"img-fluid",src:`/pokemons/${e.pokemon.pType}Front.gif`,style:{width:"10vh"},alt:""},null,8,be),P(" "+k(e.pokemon.pType)+" ",1),we,P(" HP: "+k(o.value),1)]))}},Pe=m(Se,[["__scopeId","data-v-f383d8d4"]]),xe={__name:"SwitchPokemonState",props:{player:Object,isTurn:Boolean},setup(e){const n=e,o=a=>{if(n.player.value.pokemons.contents[a-1].hp<=0){alert("Your selected Pokemon is dead. Please switch to another Pokemon.");return}C.post(`${D.serverUrl}/api/switch`,{move:a})};return(a,t)=>(r(!0),l(g,null,I(n.player.value.pokemons.contents,(s,i)=>(r(),v(Pe,{pokemon:s,key:s.pType.name,onClickHandler:o,move:i+1},null,8,["pokemon","move"]))),128))}},Ce={class:"container"},De={id:"menu-field",class:"mx-auto menu-field"},Te={class:"turn"},Ie={class:"menu-wrapper"},Oe={__name:"GameMenu.module",setup(e){const{gameState:n,player1:o,player2:a,gameTurn:t}=f(d()),s=u(()=>t.value===1?o:a),i=u(()=>{switch(n.value){case"DesicionState()":return M;case"FightingState()":return ge;case"SwitchPokemonState()":return xe;default:return M}});return(h,_)=>(r(),l("div",Ce,[c("div",De,[c("div",Te," It's your turn "+k(s.value.value.name)+" ! ",1),c("div",Ie,[(r(),v(U(i.value),{player:s.value},null,8,["player"]))])])]))}},Ae=m(Oe,[["__scopeId","data-v-9acd40d8"]]),He={__name:"ChatArea",setup(e){const{chatMessages:n}=f(d());return(o,a)=>{const t=L("v-list");return r(),v(t,{class:"chat-area",id:"chat-area"},{default:x(()=>[(r(!0),l(g,null,I(y(n),(s,i)=>(r(),l("v-list-item",{key:i},[c("v-list-item-content",null,k(s),1)]))),128))]),_:1})}}},je=m(He,[["__scopeId","data-v-c9385f44"]]),G=e=>(b("data-v-4f5c06b8"),e=e(),w(),e),Be={class:"chat",id:"app"},Fe=G(()=>c("div",{class:"row chat-title"},"Chat",-1)),Me={class:"row",style:{display:"flex","justify-content":"center"}},Ne={class:"row",style:{display:"flex"}},Ge=G(()=>c("button",{class:"send-button",type:"submit"},"Send",-1)),Ee={__name:"Chat.module",props:{currentPlayerData:{type:Object,required:!0}},setup(e){const{sendChatMessage:n}=d(),o=e,a=q(""),t=()=>{const s=`${o.currentPlayerData.name}: ${a.value.trim()}`;console.log("sendMessage",JSON.stringify({msg:s})),n(s),a.value=""};return(s,i)=>(r(),l("div",Be,[Fe,c("div",Me,[p(je)]),c("div",Ne,[c("form",{class:"send-message",onSubmit:R(t,["prevent"])},[W(c("textarea",{class:"send-message-textarea","onUpdate:modelValue":i[0]||(i[0]=h=>a.value=h),maxlength:"100"},null,512),[[Y,a.value]]),Ge],32)])]))}},Ve=m(Ee,[["__scopeId","data-v-4f5c06b8"]]),ze={class:"container-fluid"},Ue={__name:"GameOver.modules",props:{winner:Object},setup(e){const{getData:n}=d(),o=e,a=u(()=>o.winner.pokemons.contents.map(t=>t.pType));return T(async()=>{await n()}),(t,s)=>(r(),l("div",ze,[p(H,{title:"GAME OVER"}),p(H,{title:`Winner: ${e.winner.name}`},null,8,["title"]),p(K,{allPokemons:a.value},null,8,["allPokemons"])]))}},Le=m(Ue,[["__scopeId","data-v-9af28c77"]]),qe=e=>(b("data-v-68457ec7"),e=e(),w(),e),Re={class:"row game-view"},We={key:1,class:"container-fluid"},Ye=qe(()=>c("div",{class:"spinner-border text-primary",role:"status"},[c("span",{class:"visually-hidden"},"Loading...")],-1)),Je={__name:"Game",setup(e){const{getData:n}=d(),{player1:o,player2:a,winner:t,gameState:s,chatOpen:i,gameTurn:h}=f(d()),_=u(()=>h.value===1?o.value:a.value),$=u(()=>s.value==="GameOverState()");return T(async()=>{await n()}),(S,O)=>(r(),l("main",null,[c("div",Re,[y(i)?(r(),v(Ve,{key:0,currentPlayerData:_.value},null,8,["currentPlayerData"])):N("",!0),(r(),v(J,null,{fallback:x(()=>[Ye]),default:x(()=>[$.value?(r(),v(Le,{key:0,winner:y(t)},null,8,["winner"])):(r(),l("div",We,[p(he,{player1Data:y(o),player2Data:y(a)},null,8,["player1Data","player2Data"]),p(Ae)]))]),_:1}))])]))}},Ze=m(Je,[["__scopeId","data-v-68457ec7"]]);export{Ze as default};
